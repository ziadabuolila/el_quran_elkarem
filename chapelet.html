<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#007bff" />
    <link rel="icon" href="img/El_Quran_Elkarem_icon.png" />
    <link rel="stylesheet" href="css/all.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="manifest" href="manifest.json" />
    <title>Ø§Ù„Ø³Ø¨Ø­Ø©</title>
  </head>

  <body>
    <header>
      <div class="container">
        <div class="logo">
          <img
            src="img/El_Quran_Elkarem_logo.jpg"
            alt="Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…"
            draggable="false"
          />
          <h1>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
        </div>
        <nav class="nav">
          <ul>
            <li>
              <a href="index.html"> Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© </a>
            </li>
            <li>
              <a href="indice.html"> ÙÙ‡Ø±Ø³ Ø§Ù„Ø³ÙˆØ± </a>
            </li>
            <li>
              <a href="music.html"> Ø§Ù„ØªÙ„Ø§ÙˆØ§Øª Ø§Ù„ØµÙˆØªÙŠØ© </a>
            </li>
            <li>
              <a href="sceau_du_coran.html"> Ø®ØªÙ…Ù‡ Ø§Ù„Ù‚Ø±Ø¡Ø§Ù† </a>
            </li>
            <li>
              <a href="supplications_et_souvenirs.html"> Ø§Ø¯Ø¹ÙŠÙ‡ Ùˆ Ø§Ø°ÙƒØ§Ø± </a>
            </li>
            <li>
              <a href="chapelet.html" class="active"> Ø§Ù„Ø³Ø¨Ø­Ø© </a>
            </li>
            <li>
              <a href="times.html"> Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© </a>
            </li>
            <li>
              <a href="supplications.html"> Ø§Ø¨ØªÙ‡Ø§Ù„Ø§Øª</a>
            </li>
            <li>
              <a href="favourite.html"> Ø§Ù„Ù…ÙØ¶Ù„Ø©</a>
            </li>
            <li>
              <a href="calendar.html"> Ø§Ù„ØªÙ‚ÙˆÙŠÙ…</a>
            </li>
            <li>
              <a href="library_section.html"> Ù…Ù‚Ø§Ù„Ø§Øª</a>
            </li>
            <li>
              <a href="wards.html"> Ø§Ù„ÙˆØ±Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ</a>
            </li>
          </ul>
        </nav>
        <div class="menu-btn">
          <i class="fa fa-bars"></i>
        </div>
      </div>
    </header>
    <div class="overlay" id="overlay"></div>
    <div class="menu" id="menu">
      <div class="menu-header">
        <div class="logo">
          <img
            src="img/El_Quran_Elkarem_logo.jpg"
            alt="Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…"
            draggable="false"
          />
          <p>Ø§Ù„Ù‚Ø±Ø¡Ø§Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</p>
        </div>
        <div class="close-btn" id="closeBtn">
          <i class="fa-solid fa-xmark"></i>
        </div>
      </div>
      <ul>
        <a href="index.html">
          <li>
            <i class="fa-solid fa-house"></i>
            <span>Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
          </li>
        </a>
        <a href="indice.html">
          <li>
            <i class="fa-solid fa-list"></i>
            <span>ÙÙ‡Ø±Ø³ Ø§Ù„Ø³ÙˆØ±</span>
          </li>
        </a>
        <a href="music.html">
          <li>
            <i class="fa-solid fa-headphones"></i>
            <span>Ø§Ù„ØªÙ„Ø§ÙˆØ§Øª Ø§Ù„ØµÙˆØªÙŠØ©</span>
          </li>
        </a>
        <a href="sceau_du_coran.html">
          <li>
            <i class="fa-solid fa-mosque"></i>
            <span>Ø®ØªÙ…Ù‡ Ø§Ù„Ù‚Ø±Ø¢Ù†</span>
          </li>
        </a>
        <a href="supplications_et_souvenirs.html">
          <li>
            <i class="fa-solid fa-hands-praying"></i>
            <span>Ø£Ø¯Ø¹ÙŠØ© ÙˆØ£Ø°ÙƒØ§Ø±</span>
          </li>
        </a>
        <a href="chapelet.html" id="active">
          <li>
            <i class="fas fa-circle-dot"></i>
            <span>Ø§Ù„Ø³Ø¨Ø­Ø©</span>
          </li>
        </a>
        <a href="times.html">
          <li>
            <i class="fas fa-mosque"></i>
            <span>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</span>
          </li>
        </a>
        <a href="supplications.html">
          <li>
            <i class="fas fa-volume-up"></i>
            <span>Ø§Ø¨ØªÙ‡Ø§Ù„Ø§Øª</span>
          </li>
        </a>
        <a href="favourite.html">
          <li>
            <i class="fas fa-heart"></i>
            <span>Ø§Ù„Ù…ÙØ¶Ù„Ø©</span>
          </li>
        </a>
        <a href="calendar.html">
          <li>
            <i class="fas fa-calendar"></i>
            <span>Ø§Ù„ØªÙ‚ÙˆÙŠÙ…</span>
          </li>
        </a>
        <a href="library_section.html">
          <li>
            <i class="fas fa-file-text"></i>
            <span>Ù…Ù‚Ø§Ù„Ø§Øª</span>
          </li>
        </a>
        <a href="wards.html">
          <li>
            <i class="fas fa-book-open"></i>
            <span>Ø§Ù„ÙˆØ±Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ</span>
          </li>
        </a>
      </ul>
    </div>
    <div class="tasbeehType">
      <div class="sebha">
        <button id="muteBtn">ğŸ”Š</button>
        <div id="zekrText"></div>
        <input
          type="text"
          id="zekrInput"
          placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø°ÙƒØ± Ù‡Ù†Ø§"
          oninput="this.value = this.value.replace(/[^a-zA-Z\u0600-\u06FF\s]/g, '')"
        />
        <div id="inputArea">
          <input
            type="number"
            id="countInput"
            placeholder="Ø§ÙƒØªØ¨ Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„ØªØ³Ø¨ÙŠØ­"
          />
          <div class="btns_sebha">
            <button id="favToggleBtn" class="btn-tasbeeh tasbeeh_sebha">
              Ø¥Ø¶Ø§ÙØ© Ø°ÙƒØ± Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©
            </button>
            <button
              class="btn-tasbeeh chapelet_tasbeeh_sebha"
              onclick="
                const zekrVal = document.getElementById('zekrInput').value.trim();
                const countVal = document.getElementById('countInput').value.trim();
                if (!zekrVal || !countVal || parseInt(countVal) <= 0) {
                  alert('Ø¨Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø§Ø³Ù… Ø§Ù„Ø°ÙƒØ± ÙˆØ¹Ø¯Ø¯ Ø§Ù„ØªØ³Ø¨ÙŠØ­ Ø£ÙˆÙ„Ø§Ù‹');
                } else {
                  // Ø§Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Øµ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
                  document.getElementById('zekrText').textContent = zekrVal;
                  document.getElementById('zekrText').style.display = 'block';
                  // Ø§Ø®ÙØ§Ø¡ input
                  document.getElementById('zekrInput').style.display = 'none';
                  // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¯
                  activateSebha();
                }
              "
            >
              ØªÙØ¹ÙŠÙ„
            </button>
          </div>
        </div>
        <div id="tasbeehArea" style="display: none">
          <div class="count" id="count">0</div>
          <div class="btns_sebha">
            <button class="btn-tasbeeh tasbeeh_sebha" onclick="tasbeeh()">
              ØªØ³Ø¨ÙŠØ­
            </button>
            <button class="btn-reset tasbeeh_sebha" onclick="resetCount()">
              Ø¥Ø¹Ø§Ø¯Ø©
            </button>
          </div>
        </div>
        <div
          id="limitMessage"
          style="
            display: none;
            color: #fff;
            font-weight: bold;
            margin-top: 15px;
          "
        ></div>
      </div>
    </div>
    <div class="fav-wrapper" id="favWrapper" style="display: none">
      <div class="fav-box">
        <h3 class="fav-title">Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø©</h3>
        <div class="fav-list" id="favList"></div>
      </div>
    </div>
    <script>
      const azkar = [
        "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡",
        "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ùˆ Ø¨Ø­Ù…Ø¯Ù‡",
        "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ùˆ Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡",
        "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ… Ùˆ Ø¨Ø­Ù…Ø¯Ù‡",
        "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ùˆ Ø¨Ø­Ù…Ø¯Ù‡ , Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ…",
        "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ , Ù„Ù‡ Ø§Ù„Ù…Ù„Ùƒ Ùˆ Ù„Ù‡ Ø§Ù„Ø­Ù…Ø¯ Ùˆ Ù‡Ùˆ Ø¹Ù„ÙŠ ÙƒÙ„ Ø´Ø¦ Ù‚Ø¯ÙŠØ±",
        "Ù„Ø§ Ø­ÙˆÙ„ Ùˆ Ù„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡",
        "Ø§Ù„Ø­Ù…Ø¯Ù„Ù„Ù‡ Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠÙ†",
        "Ø§Ù„Ù„Ù‡Ù… ØµÙ„ÙŠ ÙˆØ³Ù„Ù… Ùˆ Ø¨Ø§Ø±Ùƒ Ø¹Ù„ÙŠ Ø³ÙŠØ¯Ù†Ø§ Ù…Ø­Ù…Ø¯",
        "Ø§Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡",
        "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ,ÙˆØ§Ù„Ø­Ù…Ø¯Ù„Ù„Ù‡ , ÙˆÙ„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ , ÙˆØ§Ù„Ù„Ù‡ Ùˆ Ø§ÙƒØ¨Ø±",
        "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡",
        "Ø§Ù„Ù„Ù‡ Ùˆ Ø§ÙƒØ¨Ø±",
        "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ , ÙˆØ§Ù„Ø­Ù…Ø¯Ù„Ù„Ù‡ , ÙˆÙ„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ , ÙˆØ§Ù„Ù„Ù‡ Ø§ÙƒØ¨Ø± , Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„ÙŠ , Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø­Ù…Ù†ÙŠ , Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù†ÙŠ",
        "Ø§Ù„Ø­Ù…Ø¯Ù„Ù„Ù‡ Ù„Ù„Ù‡ Ø­Ù…Ø¯Ø§ ÙƒØ«ÙŠØ±Ø§ Ø·ÙŠØ¨Ø§Ù…Ø¨Ø§Ø±ÙƒØ§ ÙÙŠÙ‡",
        "Ø§Ù„Ù„Ù‡ Ø§ÙƒØ¨Ø± ÙƒØ¨ÙŠØ±Ø§ , ÙˆØ§Ù„Ø­Ù…Ø¯Ù„Ù„Ù‡ ÙƒØ«ÙŠØ±Ø§ , ÙˆØ³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø¨ÙƒØ±Ø© Ùˆ Ø§ØµÙŠÙ„Ø§",
        "Ø§Ù„Ù„Ù‡Ù… ØµÙ„ÙŠ ÙŠ Ù…Ø­Ù…Ø¯ Ùˆ Ø¹Ù„ÙŠ Ø§Ù„ Ù…Ø­Ù…Ø¯ ÙƒÙ…Ø§ ØµÙ„ÙŠØª Ø¹Ù„ÙŠ Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… , Ùˆ Ø¹Ù„ÙŠ Ø§Ù„ Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¥Ù†Ùƒ Ø­Ù…ÙŠØ¯ Ù…Ø¬ÙŠØ¯ , Ø§Ù„Ù„Ù‡Ù… Ø¨Ø§Ø±Ùƒ Ø¹Ù„ÙŠ Ù…Ø­Ù…Ø¯ Ùˆ Ø¹Ù„ÙŠ Ø§Ù„ Ù…Ø­Ù…Ø¯ ÙƒÙ…Ø§ Ø¨Ø§Ø±ÙƒØª Ø¹Ù„ÙŠ Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ùˆ Ø¹Ù„ÙŠ Ø§Ù„ Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¥Ù†Ùƒ Ø­Ù…ÙŠØ¯ Ù…Ø¬ÙŠØ¯",
        "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù†Øª Ø³Ø¨Ø­Ø§Ù†Ùƒ Ø£Ù†ÙŠ ÙƒÙ†Øª Ù…Ù† Ø§Ù„Ø¸Ø§Ù„Ù…ÙŠÙ†",
      ];

      let currentIndex = 0;
      let count = 0;
      let maxCount = 0;

      const countEl = document.getElementById("count");
      const inputArea = document.getElementById("inputArea");
      const tasbeehArea = document.getElementById("tasbeehArea");
      const limitMessage = document.getElementById("limitMessage");
      const countInput = document.getElementById("countInput");
      const muteBtn = document.getElementById("muteBtn");

      const alertSound = new Audio(
        "https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"
      );
      alertSound.loop = true;
      alertSound.volume = 0.8;

      let isMuted = localStorage.getItem("isMuted") === "true";

      function updateMuteButton() {
        muteBtn.textContent = isMuted ? "ğŸ”‡" : "ğŸ”Š";
      }
      updateMuteButton();

      muteBtn.addEventListener("click", () => {
        isMuted = !isMuted;
        localStorage.setItem("isMuted", isMuted);
        updateMuteButton();
        if (isMuted) {
          alertSound.pause();
          alertSound.currentTime = 0;
        }
      });

      function activateSebha() {
        maxCount = parseInt(countInput.value);
        if (!maxCount || maxCount <= 0) {
          alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø¹Ø¯Ø¯ ØµØ­ÙŠØ­ Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±");
          return;
        }
        localStorage.setItem("tasbeehLimit", maxCount);
        inputArea.style.display = "none";
        tasbeehArea.style.display = "block";
        count = 0;
        countEl.textContent = count;
      }

      function tasbeeh() {
        if (count < maxCount) {
          count++;
          countEl.textContent = count;
          countEl.style.transform = "scale(0.8)";
          setTimeout(() => (countEl.style.transform = "scale(1)"), 150);

          if (count === maxCount) {
            showLimitMessage();
          }
        }
      }

      function resetCount() {
        count = 0;
        countEl.textContent = count;
      }

      function showLimitMessage() {
        limitMessage.textContent =
          "Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø§Ù‚ØµÙŠ Ù…Ù† Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ù‡Ø°Ø§ Ø§Ù„ØªØ³Ø¨ÙŠØ­";
        limitMessage.style.display = "block";

        if (navigator.vibrate) {
          navigator.vibrate([150, 80, 150, 80, 150]);
        }

        if (!isMuted) {
          alertSound.currentTime = 0;
          alertSound.play();
        }

        setTimeout(() => {
          alertSound.pause();
          alertSound.currentTime = 0;

          limitMessage.style.display = "none";
          tasbeehArea.style.display = "none";
          inputArea.style.display = "block";
          document.getElementById("zekrInput").style.display = "block";
          document.getElementById("zekrText").style.display = "none";
          countInput.value = "";
        }, 5000);
        setTimeout(() => {
          alertSound.pause();
          alertSound.currentTime = 0;
          location.reload();
        }, 5000);
      }
    </script>
    <script>
      const favBtn = document.getElementById("favToggleBtn");
      const favWrapper = document.getElementById("favWrapper");
      const favList = document.getElementById("favList");

      let favorites = JSON.parse(localStorage.getItem("favAzkar")) || [];

      function saveFavorites() {
        localStorage.setItem("favAzkar", JSON.stringify(favorites));
        toggleFavBtn();
      }

      function toggleFavBtn() {
        favBtn.style.display = favorites.length ? "block" : "none";
      }

      function renderFavorites() {
        favList.innerHTML = "";
        favorites.forEach((zekr, index) => {
          const item = document.createElement("div");
          item.className = "fav-item";
          item.innerHTML = `
            <span class="fav-text">${zekr}</span>
            <div class="fav-actions">
              <button
                class="fav-use-btn"
                onclick="useFavZekr('${zekr.replace(/'/g, "\\'")}')"
              >
                Ø¥Ø¶Ø§ÙÙ‡
              </button>
              <button
                class="fav-remove-btn"
                onclick="removeFav(${index})"
              >
                Ø­Ø°Ù
              </button>
            </div>
          `;
          favList.appendChild(item);
        });
      }

      function removeFav(index) {
        favorites.splice(index, 1);
        saveFavorites();
        renderFavorites();
      }

      favBtn.addEventListener("click", () => {
        favWrapper.style.display = "flex";
        renderFavorites();
      });

      favWrapper.addEventListener("click", (e) => {
        if (e.target === favWrapper) {
          favWrapper.style.display = "none";
        }
      });

      /* ===== Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø°ÙƒØ± Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ ===== */
      function addToFavorites(zekr) {
        if (!favorites.includes(zekr)) {
          favorites.push(zekr);
          saveFavorites();
        }
      }

      toggleFavBtn();

      /* Ø¹Ø¯Ù„ Ø¯Ø§Ù„Ø© showLimitMessage */
      const originalShowLimit = showLimitMessage;
      showLimitMessage = function () {
        addToFavorites(document.getElementById("zekrText").textContent);
        favBtn.style.display = "block";
        originalShowLimit();
      };
      function useFavZekr(zekr) {
        const zekrInput = document.getElementById("zekrInput");

        zekrInput.value = zekr;
        zekrInput.focus();

        favWrapper.style.display = "none";
      }
    </script>

    <script src="js/jquery-3.7.0.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/all.min.js"></script>
    <script src="js/main.js"></script>

    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("js/sw.js")
          .then((reg) => console.log("Service Worker registered:", reg))
          .catch((err) =>
            console.log("Service Worker registration failed:", err)
          );
      }
    </script>
  </body>
</html>
